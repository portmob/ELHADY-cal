<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
    <title>ELHADY Cal+ (Glass iOS18)</title>

    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icon.png">
    <link rel="stylesheet" href="style.css">

    <!-- Ionicons -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</head>
<body>

<!-- SPLASH -->
<div id="splash" class="splash">
    <img src="icon.png" alt="ELHADY">
    <h1>ELHADY</h1>
</div>

<!-- THEME TOGGLE (top-left) -->
<button id="themeBtn" class="circle-btn" title="تبديل الثيم"><ion-icon name="sunny"></ion-icon></button>

<!-- APP -->
<div class="app" id="app">

    <!-- HOME -->
    <section id="home" class="screen visible">
        <header class="header glass">
            <div class="header-left">
                <div class="app-title">ELHADY</div>
            </div>
        </header>

        <div class="grid folders">
            <div class="card folder" onclick="openSection('payments')">
                <div class="card-icon"><ion-icon name="wallet"></ion-icon></div>
                <div class="card-title">المدفوعات</div>
                <div class="card-sub">سجل المدفوعات</div>
            </div>

            <div class="card folder" onclick="openSection('supplies')">
                <div class="card-icon"><ion-icon name="cube"></ion-icon></div>
                <div class="card-title">التوريدات</div>
                <div class="card-sub">سجل التوريدات</div>
            </div>
            <div class="card folder" onclick="openSection('labor')">
                <div class="card-icon"><ion-icon name="people"></ion-icon></div>
                <div class="card-title">العمالة الشهرية</div>
                <div class="card-sub">الحضور اليومي والشهري</div>
            </div>

        </div>

    </section>

    <!-- PAYMENTS -->
    <section id="payments" class="screen">
        <div class="topbar glass">
            <button class="back" onclick="openSection('home')"><ion-icon name="chevron-back"></ion-icon></button>
            <div class="title">المدفوعات</div>
            <div class="right-actions">
                <div class="count" id="paymentsCount">0</div>
            </div>
        </div>

        <div class="content">
            <div class="stats-row">
                <div class="glass-card">
                    <div class="label">إجمالي الظاهر</div>
                    <div class="value" id="totalPayments">0</div>
                </div>
            </div>

            <div class="list-wrap">
                <table id="paymentsTable" class="nice-table">
                    <thead><tr><th>#</th><th>المرسل</th><th>المستلم</th><th>المبلغ</th><th>التاريخ</th><th></th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- SUPPLIES -->
    <section id="supplies" class="screen">
        <div class="topbar glass">
            <button class="back" onclick="openSection('home')"><ion-icon name="chevron-back"></ion-icon></button>
            <div class="title">التوريدات</div>
            <div class="right-actions">
                <div class="count" id="suppliesCount">0</div>
            </div>
        </div>

        <div class="content">
            <div class="stats-row">
                <div class="glass-card">
                    <div class="label">إجمالي الكمية</div>
                    <div class="value" id="totalSupplies">0</div>
                </div>
            </div>

            <div class="list-wrap">
                <table id="suppliesTable" class="nice-table">
                    <thead><tr><th>#</th><th>المرسل</th><th>المستلم</th><th>الكمية</th><th>النوع</th><th>التاريخ</th><th></th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </section>

    <section id="labor" class="screen">
        <div class="topbar glass">
            <button class="back" onclick="openSection('home')"><ion-icon name="chevron-back"></ion-icon></button>
            <div class="title">العمالة الشهرية</div>
            <div class="right-actions">
                <div class="count" id="laborCount">0</div>
            </div>
        </div>

        <div class="content">

            <div class="stats-row">
                <div class="glass-card">
                    <div class="label">عدد السجلات</div>
                    <div class="value" id="laborTotal">0</div>
                </div>
            </div>

            <div class="list-wrap">
                <table id="laborTable" class="nice-table">
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>العامل</th>
                        <th>المقاول</th>
                        <th>حضور يوم</th>
                        <th>حضور سهرة</th>
                        <th>مكان العمل</th>
                        <th>اليوم</th>
                        <th>الشهر</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

        </div>
    </section>


</div> <!-- /app -->

<!-- BOTTOM GLASS TABBAR -->
<div class="tabbar glass">
    <button class="tab" onclick="onTab('view')" title="عرض"><ion-icon name="grid"></ion-icon><span>عرض</span></button>
    <button class="tab" onclick="onTab('filter')" title="فلتر"><ion-icon name="funnel"></ion-icon><span>فلتر</span></button>

    <button id="fab" class="fab" title="إضافة">+</button>

    <button class="tab" onclick="onTab('export')" title="تصدير"><ion-icon name="cloud-download"></ion-icon><span>تصدير</span></button>
    <!-- removed extra OS/windows buttons per request -->
</div>

<!-- MODAL BACKDROP -->
<div id="modalBackdrop" class="modal-backdrop"></div>

<!-- hidden filter inputs for persistence -->
<input id="fp_sender" type="hidden">
<input id="fp_receiver" type="hidden">
<input id="fp_start" type="hidden">
<input id="fp_end" type="hidden">

<input id="fs_sender" type="hidden">
<input id="fs_receiver" type="hidden">
<input id="fs_start" type="hidden">
<input id="fs_end" type="hidden">

<!-- XLSX -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<!-- app -->
<script src="app.js"></script>
</body>
</html>
